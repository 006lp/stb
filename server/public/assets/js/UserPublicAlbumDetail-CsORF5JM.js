import{u as a,b as l,r as e,o as u,f as s,g as i,i as n,m as r,l as v,aq as t,k as o,av as d,y as c,z as p,$ as m,ar as g,h as f,a6 as _,q as b,x as y,a1 as h,j as k,as as w,E as j,J as x,a3 as z}from"./vendor-Ct0GE2cv.js";import{_ as I,u as $,i as q}from"./index-D-heiWuO.js";const C={class:"public-album-detail"},U={class:"card-title"},A={key:1,class:"image-grid"},D={class:"image-tags"},E={key:0,class:"pagination"},J=I({__name:"UserPublicAlbumDetail",setup(I){const J=a(),P=l(),B=$(),F=e(null),G=e(null),H=e(null),K=e(null),L=e([]),M=e(!1),N=e(!1),O=e(1),Q=e(20),R=e(0),S=async a=>{var l;N.value=!0,L.value=[],R.value=0;try{const{data:l}=await q.post(`/api/public/albums/${a}/images`,z.stringify({page:O.value,limit:Q.value}));L.value=l.images,R.value=l.total,K.value=l.album}catch({response:e}){x.error(null==(l=null==e?void 0:e.data)?void 0:l.error)}finally{N.value=!1}},T=a=>{O.value=a,S(G.value)};return u((()=>{F.value=J.params.userId,G.value=J.params.albumId,O.value=1,(async a=>{var l;try{const{data:l}=await q.post(`/api/public/users/${a}`);H.value=l}catch({response:e}){x.error(null==(l=null==e?void 0:e.data)?void 0:l.error)}})(F.value),S(G.value)})),(a,l)=>{const e=j,u=d,x=h,z=_,I=g,$=m,q=t,J=w;return i(),s("div",C,[n($,null,{title:r((()=>{var a,u,s,i,v;return[f("div",U,[f("span",null,y((null==(a=H.value)?void 0:a.username)===(null==(s=null==(u=k(B))?void 0:u.user)?void 0:s.username)?"我":null==(i=H.value)?void 0:i.username)+"的相册："+y(null==(v=K.value)?void 0:v.name),1),n(e,{onClick:l[0]||(l[0]=a=>k(P).go(-1))},{default:r((()=>l[2]||(l[2]=[b("返回")]))),_:1,__:[2]})])]})),default:r((()=>[n(q,{spinning:M.value||N.value},{default:r((()=>[0!==L.value.length||N.value?(i(),s("div",A,[(i(!0),s(c,null,p(L.value,(a=>(i(),s("div",{key:a._id,class:"image-item"},[n($,{hoverable:""},{cover:r((()=>{var l,e,u,s,i,r;return[n(x,{src:(null==(u=null==(e=null==(l=k(B))?void 0:l.config)?void 0:e.site)?void 0:u.url)+a.thumb,preview:{src:(null==(r=null==(i=null==(s=k(B))?void 0:s.config)?void 0:i.site)?void 0:r.url)+a.url}},null,8,["src","preview"])]})),default:r((()=>[n(I,null,{title:r((()=>[b(y(a.filename),1)])),description:r((()=>[f("div",D,[(i(!0),s(c,null,p(a.tags,(a=>(i(),o(z,{key:a},{default:r((()=>[b(y(a),1)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)])))),128))])):(i(),o(u,{key:0,description:"暂无图片"}))])),_:1},8,["spinning"]),R.value>Q.value?(i(),s("div",E,[n(J,{current:O.value,"onUpdate:current":l[1]||(l[1]=a=>O.value=a),total:R.value,"page-size":Q.value,onChange:T},null,8,["current","total","page-size"])])):v("",!0)])),_:1})])}}},[["__scopeId","data-v-e22ee9f7"]]);export{J as default};
