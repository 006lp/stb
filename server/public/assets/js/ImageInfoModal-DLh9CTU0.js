import{u as e}from"./index-D-heiWuO.js";import{b as a,k as l,g as i,m as s,h as n,l as m,f as o,i as u,a1 as t,j as r,X as d,Y as f,x as g,q as p,ay as c,az as y,E as I,v as _,au as b}from"./vendor-Ct0GE2cv.js";import{f as v,a as h,c as k}from"./formatDate-_UAqMSvc.js";const K={class:"modal-image-container"},C={class:"anticon anticon-left"},w={class:"anticon anticon-right"},j={__name:"ImageInfoModal",props:{modelValue:{type:Boolean,required:!0},imageInfo:{type:Object,required:!0},imageKey:{type:Number,default:0},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:imageInfo","update:imageKey"],setup(j,{emit:V}){const x=a(),q=j,z=V,A=e(),$=e=>{z("update:modelValue",e)},D=()=>{z("update:modelValue",!1)},M=()=>{q.imageKey>0&&(z("update:imageInfo",q.images[q.imageKey-1]),z("update:imageKey",q.imageKey-1))},P=()=>{q.imageKey<q.images.length-1&&(z("update:imageInfo",q.images[q.imageKey+1]),z("update:imageKey",q.imageKey+1))},U=(e,a)=>{("user"!==a||e.user)&&("album"!==a||e.album)&&x.push("user"===a?`/user/${e.user._id}`:`/user/${e.user._id}/album/${e.album._id}`)};return(e,a)=>{const V=t,x=f,q=d,z=I,B=b;return i(),l(B,{open:j.modelValue,"onUpdate:open":$,class:_(["gallery-modal",{isUser:r(A).token}]),maskClosable:!1,closable:!1,title:" "},{footer:s((()=>[u(z,{type:"primary",onClick:a[2]||(a[2]=e=>r(k)(e,j.imageInfo,r(A)))},{default:s((()=>a[3]||(a[3]=[p("复制链接")]))),_:1,__:[3]}),u(z,{type:"primary",onClick:D},{default:s((()=>a[4]||(a[4]=[p("关闭弹窗")]))),_:1,__:[4]})])),default:s((()=>[n("div",K,[u(V,{class:"modal-image",placeholder:"",src:"local"===j.imageInfo.type?r(A).config.site.url+j.imageInfo.url:j.imageInfo.url,preview:!1},null,8,["src"])]),r(A).token?(i(),l(q,{key:0,bordered:"",column:1,size:"middle"},{default:s((()=>{var e,o,t,d,f;return[u(x,{label:"上传用户"},{default:s((()=>{var e,l;return[n("span",{class:"username",onClick:a[0]||(a[0]=e=>U(j.imageInfo,"user"))},g((null==(l=null==(e=j.imageInfo)?void 0:e.user)?void 0:l.username)||"游客"),1)]})),_:1}),u(x,{label:"所属相册"},{default:s((()=>{var e,l;return[n("span",{class:"username",onClick:a[1]||(a[1]=e=>U(j.imageInfo,"album"))},g((null==(l=null==(e=j.imageInfo)?void 0:e.album)?void 0:l.name)||"独立图片"),1)]})),_:1}),u(x,{label:"图片名称"},{default:s((()=>[p(g(j.imageInfo.filename),1)])),_:1}),u(x,{label:"原始名称"},{default:s((()=>[p(g(j.imageInfo.name),1)])),_:1}),u(x,{label:"图片大小"},{default:s((()=>[p(g(r(v)(j.imageInfo.size)),1)])),_:1}),u(x,{label:"物理路径"},{default:s((()=>[p(g(j.imageInfo.filePath),1)])),_:1}),u(x,{label:"图片类型"},{default:s((()=>[p("image/"+g(j.imageInfo.filename.split(".").pop()),1)])),_:1}),u(x,{label:"MD5"},{default:s((()=>[p(g(j.imageInfo.md5),1)])),_:1}),u(x,{label:"SHA1"},{default:s((()=>[p(g(j.imageInfo.sha1),1)])),_:1}),u(x,{label:"尺寸"},{default:s((()=>[p(g(j.imageInfo.width)+" x "+g(j.imageInfo.height),1)])),_:1}),(null==(e=r(A))?void 0:e.user)&&((null==(t=null==(o=r(A))?void 0:o.user)?void 0:t.username)===(null==(d=j.imageInfo.user)?void 0:d.username)||(null==(f=r(A).user)?void 0:f.founder))?(i(),l(x,{key:0,label:"上传IP"},{default:s((()=>[p(g(j.imageInfo.ip)+" (仅自己与管理员可见) ",1)])),_:1})):m("",!0),u(x,{label:"上传时间"},{default:s((()=>[p(g(r(h)(j.imageInfo.updatedAt)),1)])),_:1})]})),_:1})):m("",!0),j.imageKey>0?(i(),o("div",{key:1,class:"ant-image-preview-switch-left",onClick:M},[n("span",C,[u(r(c))])])):m("",!0),j.images.length>1&&j.images.length>j.imageKey+1?(i(),o("div",{key:2,class:"ant-image-preview-switch-right",onClick:P},[n("span",w,[u(r(y))])])):m("",!0)])),_:1},8,["open","class"])}}};export{j as _};
