import{_ as g,u as k,r as h,o as S,c as C,a as t,w as s,F as x,b as _,d as B,e as U,I as q,f as F,g as u,h as I,B as N,C as V,i as L,j as i,k as l}from"./index-VChYWv4H.js";import{C as $}from"./Captcha-BlARCeJp.js";const j={class:"login-container"},E={__name:"Login",setup(M){const c=L(),m=k(),a=h({username:"",password:"",captchaShow:!1}),f=async()=>{var n,e;try{await m.login(a.username,a.password),c.push("/"),i.success("登录成功")}catch(p){i.error(((e=(n=p.response)==null?void 0:n.data)==null?void 0:e.error)||"登录失败")}};return S(()=>{a.captchaShow=m.config.site.captcha}),(n,e)=>{const p=q,r=U,w=F,d=N,b=I,v=x,y=V;return l(),C("div",j,[t(y,{title:"登录",style:{width:"400px"}},{default:s(()=>[t(v,{model:a,onFinish:f,layout:"vertical"},{default:s(()=>[t(r,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"}]},{default:s(()=>[t(p,{value:a.username,"onUpdate:value":e[0]||(e[0]=o=>a.username=o)},null,8,["value"])]),_:1}),t(r,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:s(()=>[t(w,{value:a.password,"onUpdate:value":e[1]||(e[1]=o=>a.password=o)},null,8,["value"])]),_:1}),a.captchaShow?(l(),_(r,{key:0,label:"验证码",name:"captcha",rules:[{required:!0,message:"请滑动验证码"}]},{default:s(()=>[t($,{value:a.captcha,"onUpdate:value":e[2]||(e[2]=o=>a.captcha=o)},null,8,["value"])]),_:1})):B("",!0),t(r,null,{default:s(()=>[a.captchaShow?(l(),_(d,{key:1,type:"primary","html-type":"submit",block:"",disabled:!a.captcha||!a.username||!a.password},{default:s(()=>e[5]||(e[5]=[u(" 登录 ")])),_:1,__:[5]},8,["disabled"])):(l(),_(d,{key:0,type:"primary","html-type":"submit",block:"",disabled:!a.username||!a.password},{default:s(()=>e[4]||(e[4]=[u(" 登录 ")])),_:1,__:[4]},8,["disabled"]))]),_:1}),t(b,null,{default:s(()=>e[6]||(e[6]=[u("或")])),_:1,__:[6]}),t(d,{type:"link",block:"",onClick:e[3]||(e[3]=o=>n.$router.push("/register"))},{default:s(()=>e[7]||(e[7]=[u(" 注册新账号 ")])),_:1,__:[7]})]),_:1},8,["model"])]),_:1})])}}},z=g(E,[["__scopeId","data-v-66dfcfd1"]]);export{z as default};
