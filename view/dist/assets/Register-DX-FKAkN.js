import{_ as h,u as C,r as S,o as P,c as U,a as s,w as t,F as q,b as m,d as x,e as B,I as E,f as F,g as u,h as I,B as N,C as R,j as c,i as V,k as d}from"./index-VChYWv4H.js";import{C as $}from"./Captcha-BlARCeJp.js";const j={class:"register-container"},M={__name:"Register",setup(T){const f=V(),p=C(),e=S({email:"",username:"",password:"",captcha:!1,confirmPassword:"",captchaShow:!1}),w=async(o,a)=>{if(!a.includes("@"))throw new Error("请输入正确的邮箱地址")},v=async(o,a)=>{if(a!==e.password)throw new Error("两次输入的密码不一致")},b=async()=>{var o,a;try{await p.register(e.username,e.password,e.email),c.success("注册成功"),f.push("/")}catch(l){c.error(((a=(o=l.response)==null?void 0:o.data)==null?void 0:a.error)||"注册失败")}};return P(()=>{e.captchaShow=p.config.site.captcha}),(o,a)=>{const l=E,n=B,_=F,i=N,y=I,g=q,k=R;return d(),U("div",j,[s(k,{title:"注册",style:{width:"400px"}},{default:t(()=>[s(g,{model:e,onFinish:b,layout:"vertical"},{default:t(()=>[s(n,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"}]},{default:t(()=>[s(l,{value:e.username,"onUpdate:value":a[0]||(a[0]=r=>e.username=r)},null,8,["value"])]),_:1}),s(n,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:t(()=>[s(_,{value:e.password,"onUpdate:value":a[1]||(a[1]=r=>e.password=r)},null,8,["value"])]),_:1}),s(n,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请确认密码"},{validator:v}]},{default:t(()=>[s(_,{value:e.confirmPassword,"onUpdate:value":a[2]||(a[2]=r=>e.confirmPassword=r)},null,8,["value"])]),_:1},8,["rules"]),s(n,{label:"邮箱地址",name:"email",rules:[{required:!0,message:"请输入正确的邮箱地址"},{validator:w}]},{default:t(()=>[s(l,{value:e.email,"onUpdate:value":a[3]||(a[3]=r=>e.email=r)},null,8,["value"])]),_:1},8,["rules"]),e.captchaShow?(d(),m(n,{key:0,label:"验证码",name:"captcha",rules:[{required:!0,message:"请滑动验证码"}]},{default:t(()=>[s($,{value:e.captcha,"onUpdate:value":a[4]||(a[4]=r=>e.captcha=r)},null,8,["value"])]),_:1})):x("",!0),s(n,null,{default:t(()=>[e.captchaShow?(d(),m(i,{key:0,type:"primary","html-type":"submit",block:"",disabled:!e.captcha||!e.email||!e.confirmPassword||!e.password||!e.username},{default:t(()=>a[6]||(a[6]=[u(" 注册 ")])),_:1,__:[6]},8,["disabled"])):(d(),m(i,{key:1,type:"primary","html-type":"submit",block:"",disabled:!e.email||!e.confirmPassword||!e.password||!e.username},{default:t(()=>a[7]||(a[7]=[u(" 注册 ")])),_:1,__:[7]},8,["disabled"]))]),_:1}),s(y,null,{default:t(()=>a[8]||(a[8]=[u("或")])),_:1,__:[8]}),s(i,{type:"link",block:"",onClick:a[5]||(a[5]=r=>o.$router.push("/login"))},{default:t(()=>a[9]||(a[9]=[u(" 返回登录 ")])),_:1,__:[9]})]),_:1},8,["model"])]),_:1})])}}},D=h(M,[["__scopeId","data-v-a090e3f7"]]);export{D as default};
