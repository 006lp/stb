import{a as _,p as E,q as K,_ as W,u as G,l as U,s as q,c as w,d as J,w as b,m as I,t as $,v as F,U as Q,C as X,g as Y,B as Z,x as k,y as L,z as M,T as tt,A as et,j as S,k as g,b as O,I as rt}from"./index-VChYWv4H.js";var nt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function z(d){for(var p=1;p<arguments.length;p++){var h=arguments[p]!=null?Object(arguments[p]):{},y=Object.keys(h);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(h).filter(function(i){return Object.getOwnPropertyDescriptor(h,i).enumerable}))),y.forEach(function(i){at(d,i,h[i])})}return d}function at(d,p,h){return p in d?Object.defineProperty(d,p,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[p]=h,d}var P=function(p,h){var y=z({},p,h.attrs);return _(E,z({},y,{icon:nt}),null)};P.displayName="InboxOutlined";P.inheritAttrs=!1;var H={exports:{}},N;function ot(){return N||(N=1,function(d,p){(function(h){d.exports=h()})(function(h){var y=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(o,a){var e=o[0],t=o[1],n=o[2],r=o[3];e+=(t&n|~t&r)+a[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[1]-389564586|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[2]+606105819|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[6]-1473231341|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[7]-45705983|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[10]-42063|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[13]-40341101|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[14]-1502002290|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,e+=(t&r|n&~r)+a[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[11]+643717713|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[0]-373897302|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[10]+38016083|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[15]-660478335|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[4]-405537848|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[3]-187363961|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[2]-51403784|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[7]+1735328473|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,e+=(t^n^r)+a[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[11]+1839030562|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[14]-35309556|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[7]-155497632|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[0]-358537222|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[3]-722521979|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[6]+76029189|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[12]-421815835|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[15]+530742520|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[2]-995338651|0,t=(t<<23|t>>>9)+n|0,e+=(n^(t|~r))+a[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[14]-1416354905|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[5]-57434055|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[10]-1051523|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[15]-30611744|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[6]-1560198380|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[2]+718787259|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[9]-343485551|0,t=(t<<21|t>>>11)+n|0,o[0]=e+o[0]|0,o[1]=t+o[1]|0,o[2]=n+o[2]|0,o[3]=r+o[3]|0}function B(o){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=o.charCodeAt(e)+(o.charCodeAt(e+1)<<8)+(o.charCodeAt(e+2)<<16)+(o.charCodeAt(e+3)<<24);return a}function A(o){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=o[e]+(o[e+1]<<8)+(o[e+2]<<16)+(o[e+3]<<24);return a}function x(o){var a=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,l,c,m;for(t=64;t<=a;t+=64)i(e,B(o.substring(t-64,t)));for(o=o.substring(t-64),n=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(i(e,r),t=0;t<16;t+=1)r[t]=0;return l=a*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(l[2],16),m=parseInt(l[1],16)||0,r[14]=c,r[15]=m,i(e,r),e}function j(o){var a=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,l,c,m;for(t=64;t<=a;t+=64)i(e,A(o.subarray(t-64,t)));for(o=t-64<a?o.subarray(t-64):new Uint8Array(0),n=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=o[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(i(e,r),t=0;t<16;t+=1)r[t]=0;return l=a*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(l[2],16),m=parseInt(l[1],16)||0,r[14]=c,r[15]=m,i(e,r),e}function D(o){var a="",e;for(e=0;e<4;e+=1)a+=y[o>>e*8+4&15]+y[o>>e*8&15];return a}function v(o){var a;for(a=0;a<o.length;a+=1)o[a]=D(o[a]);return o.join("")}v(x("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function o(a,e){return a=a|0||0,a<0?Math.max(a+e,0):Math.min(a,e)}ArrayBuffer.prototype.slice=function(a,e){var t=this.byteLength,n=o(a,t),r=t,l,c,m,R;return e!==h&&(r=o(e,t)),n>r?new ArrayBuffer(0):(l=r-n,c=new ArrayBuffer(l),m=new Uint8Array(c),R=new Uint8Array(this,n,l),m.set(R),c)}}();function C(o){return/[\u0080-\uFFFF]/.test(o)&&(o=unescape(encodeURIComponent(o))),o}function T(o,a){var e=o.length,t=new ArrayBuffer(e),n=new Uint8Array(t),r;for(r=0;r<e;r+=1)n[r]=o.charCodeAt(r);return a?n:t}function V(o){return String.fromCharCode.apply(null,new Uint8Array(o))}function f(o,a,e){var t=new Uint8Array(o.byteLength+a.byteLength);return t.set(new Uint8Array(o)),t.set(new Uint8Array(a),o.byteLength),t}function u(o){var a=[],e=o.length,t;for(t=0;t<e-1;t+=2)a.push(parseInt(o.substr(t,2),16));return String.fromCharCode.apply(String,a)}function s(){this.reset()}return s.prototype.append=function(o){return this.appendBinary(C(o)),this},s.prototype.appendBinary=function(o){this._buff+=o,this._length+=o.length;var a=this._buff.length,e;for(e=64;e<=a;e+=64)i(this._hash,B(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},s.prototype.end=function(o){var a=this._buff,e=a.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)n[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(n,e),r=v(this._hash),o&&(r=u(r)),this.reset(),r},s.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},s.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},s.prototype.setState=function(o){return this._buff=o.buff,this._length=o.length,this._hash=o.hash,this},s.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},s.prototype._finish=function(o,a){var e=a,t,n,r;if(o[e>>2]|=128<<(e%4<<3),e>55)for(i(this._hash,o),e=0;e<16;e+=1)o[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),r=parseInt(t[1],16)||0,o[14]=n,o[15]=r,i(this._hash,o)},s.hash=function(o,a){return s.hashBinary(C(o),a)},s.hashBinary=function(o,a){var e=x(o),t=v(e);return a?u(t):t},s.ArrayBuffer=function(){this.reset()},s.ArrayBuffer.prototype.append=function(o){var a=f(this._buff.buffer,o),e=a.length,t;for(this._length+=o.byteLength,t=64;t<=e;t+=64)i(this._hash,A(a.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},s.ArrayBuffer.prototype.end=function(o){var a=this._buff,e=a.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,r;for(n=0;n<e;n+=1)t[n>>2]|=a[n]<<(n%4<<3);return this._finish(t,e),r=v(this._hash),o&&(r=u(r)),this.reset(),r},s.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},s.ArrayBuffer.prototype.getState=function(){var o=s.prototype.getState.call(this);return o.buff=V(o.buff),o},s.ArrayBuffer.prototype.setState=function(o){return o.buff=T(o.buff,!0),s.prototype.setState.call(this,o)},s.ArrayBuffer.prototype.destroy=s.prototype.destroy,s.ArrayBuffer.prototype._finish=s.prototype._finish,s.ArrayBuffer.hash=function(o,a){var e=j(new Uint8Array(o)),t=v(e);return a?u(t):t},s})}(H)),H.exports}var st=ot();const ut=K(st),it={class:"home-container"},ft={class:"ant-upload-hint"},lt={class:"ant-upload-drag-icon"},pt={class:"ant-upload-hint"},ct={key:0,class:"result-panel"},ht={__name:"Home",setup(d){const p=G(),h=U([]),y=U([]),i=U([]),B=U(0),A=U("url"),x=()=>{const f=i.value.join(`
`);navigator.clipboard.writeText(f),S.success("链接已复制到剪贴板")},j=f=>{Array.isArray(f)?(i.value.push(...f),B.value=i.value.length-1):typeof f=="string"&&f&&(i.value.push(f),B.value=i.value.length-1),A.value="url"},D=q(()=>{const f=p.config.upload.allowedFormats;return f.length?f.map(u=>`image/${u}`).join(","):"image/*"}),v=q(()=>{const f=p.config.upload.allowedFormats;return f.length?f.join(", ").toUpperCase():"all"}),C=f=>{const u=f.type.startsWith("image/");return u||S.error("只能上传图片文件！"),u},T=async f=>new Promise((u,s)=>{const o=new FileReader;o.onload=a=>{const e=new ut.ArrayBuffer;e.append(a.target.result),u(e.end())},o.onerror=s,o.readAsArrayBuffer(f)}),V=async({file:f})=>{var u,s;try{const o=await T(f),a=p.user,e=new FormData;e.append("image",f),e.append("md5",o),e.append("ip",a.ip.ipv4?a.ip.ipv4:a.ip.ipv6);const t=await et.post("/api/upload",e);y.value.unshift(t.data),t.data.isDuplicate?S.warning("该图片已存在，已添加到你的图片库"):(S.success("上传成功！"),j(p.config.site.url+t.data.url))}catch(o){S.error((s=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:s.error)}};return(f,u)=>{const s=Q,o=X,a=Z,e=rt,t=k,n=tt;return g(),w("div",it,[_(o,{class:"upload-card"},{default:b(()=>[I("p",ft," 您单次最多可以上传"+$(F(p).config.upload.concurrentUploads)+"张图片, 最大文件大小："+$(F(p).config.upload.maxSize)+"MB ",1),_(s,{fileList:h.value,"onUpdate:fileList":u[0]||(u[0]=r=>h.value=r),beforeUpload:C,customRequest:V,accept:D.value,multiple:"",maxCount:F(p).config.upload.concurrentUploads,showUploadList:!1},{default:b(()=>[I("p",lt,[_(F(P))]),u[6]||(u[6]=I("p",{class:"ant-upload-text"},"点击或拖拽图片到此区域上传",-1)),I("p",pt," 支持格式："+$(v.value),1)]),_:1,__:[6]},8,["fileList","accept","maxCount"])]),_:1}),i.value.length>0?(g(),w("div",ct,[_(a,{type:"primary",onClick:x},{default:b(()=>u[7]||(u[7]=[Y("一键复制")])),_:1,__:[7]}),_(n,{activeKey:A.value,"onUpdate:activeKey":u[5]||(u[5]=r=>A.value=r)},{default:b(()=>[_(t,{key:"url",tab:"URL"},{default:b(()=>[(g(!0),w(L,null,M(i.value,(r,l)=>(g(),O(e,{class:"ant-input",key:r||l,value:r,readonly:"",onFocus:u[1]||(u[1]=c=>c.target.select())},null,8,["value"]))),128))]),_:1}),_(t,{key:"html",tab:"HTML"},{default:b(()=>[(g(!0),w(L,null,M(i.value,(r,l)=>(g(),O(e,{class:"ant-input",key:r||l,value:`<img src='${r}' alt='' />`,readonly:"",onFocus:u[2]||(u[2]=c=>c.target.select())},null,8,["value"]))),128))]),_:1}),_(t,{key:"bbcode",tab:"BBCode"},{default:b(()=>[(g(!0),w(L,null,M(i.value,(r,l)=>(g(),O(e,{class:"ant-input",key:r||l,value:`[img]${r}[/img]`,readonly:"",onFocus:u[3]||(u[3]=c=>c.target.select())},null,8,["value"]))),128))]),_:1}),_(t,{key:"markdown",tab:"Markdown"},{default:b(()=>[(g(!0),w(L,null,M(i.value,(r,l)=>(g(),O(e,{class:"ant-input",key:r||l,value:`![](${r})`,readonly:"",onFocus:u[4]||(u[4]=c=>c.target.select())},null,8,["value"]))),128))]),_:1})]),_:1},8,["activeKey"])])):J("",!0)])}}},yt=W(ht,[["__scopeId","data-v-e63a2384"]]);export{yt as default};
