import"./base-Ca4tGcLM.js";import{E as k,f as v,a as y}from"./formatDate-Cq64O7Br.js";import{_ as M,u as w,l as m,o as I,c as z,a as o,w as s,W as C,v as p,g as n,t as c,B as E,A as f,j as i,$ as S,k as D}from"./index-VChYWv4H.js";const F={class:"images"},T={__name:"Images",setup($){const g=w(),_=m([]),u=m(!1),d=async()=>{u.value=!0;try{const e=await f.get("/api/admin/images");_.value=e.data}catch{i.error("获取图片列表失败")}finally{u.value=!1}},h=e=>{if(e===0)return"0 B";const l=1024,r=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,t)).toFixed(2))+" "+r[t]},x=e=>{S.confirm({title:"确认删除",content:"确定要删除这张图片吗？",async onOk(){try{await f.delete(`/api/admin/images/${e}`),i.success("删除成功"),d()}catch{i.error("删除失败")}}})};return I(d),(e,l)=>{const r=C,t=k,b=E,B=y;return D(),z("div",F,[o(B,{data:_.value,"scrollbar-always-on":!0,fit:""},{default:s(()=>[o(t,{prop:"url",label:"预览",fixed:""},{default:s(({row:a})=>[o(r,{src:p(g).config.site.url+a.url,alt:a.name,style:{"max-width":"100px"}},null,8,["src","alt"])]),_:1}),o(t,{prop:"name",label:"文件名"}),o(t,{prop:"size",label:"大小"},{default:s(({row:a})=>[n(c(h(a.size)),1)]),_:1}),o(t,{prop:"name",label:"上传者"},{default:s(({row:a})=>[n(c(a.user.username),1)]),_:1}),o(t,{prop:"date",label:"上传时间"},{default:s(({row:a})=>[n(c(p(v)(a.date)),1)]),_:1}),o(t,{label:"操作",fixed:"right"},{default:s(({row:a})=>[o(b,{type:"link",danger:"",onClick:N=>x(a._id)},{default:s(()=>l[0]||(l[0]=[n(" 删除 ")])),_:2,__:[0]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}},G=M(T,[["__scopeId","data-v-2df8211a"]]);export{G as default};
