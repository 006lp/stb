import{r as e,o as a,f as l,i as u,m as t,$ as s,au as n,g as o,ai as v,n as r,aj as d,ak as i,E as p,q as c,Z as m,aV as b,a0 as f,y as _,z as y,at as g,x as S,J as w}from"./vendor-Ct0GE2cv.js";import{i as x}from"./index-D-heiWuO.js";const T={__name:"Roles",setup(T){const k=e([]),R=e(""),U=e(!1),q=e({name:"",description:"",storageType:"local"}),h=[{value:"local",label:"本地存储"},{value:"oss",label:"阿里云OSS"},{value:"cos",label:"腾讯云COS"},{value:"s3",label:"S3兼容存储"},{value:"qiniu",label:"七牛云"},{value:"upyun",label:"又拍云"},{value:"sftp",label:"SFTP"},{value:"ftp",label:"FTP"},{value:"webdav",label:"WebDAV"},{value:"telegram",label:"Telegram"},{value:"github",label:"GitHub"}],j=async()=>{const{data:e}=await x.get("/api/role");k.value=e.roles},C=async()=>{const{data:e}=await x.get("/api/role/search",{params:{keyword:R.value}});k.value=e.roles},I=async()=>{q.value.name?(await x.post("/api/role",q.value),w.success("角色创建成功"),U.value=!1,j()):w.error("角色名不能为空")};return a(j),(e,a)=>{const w=i,x=d,T=p,j=v,O=b,D=m,F=s,K=g,P=f,V=n;return o(),l("div",null,[u(F,{title:"角色管理"},{default:t((()=>[u(j,{layout:"inline",onSubmit:r(C,["prevent"])},{default:t((()=>[u(x,null,{default:t((()=>[u(w,{value:R.value,"onUpdate:value":a[0]||(a[0]=e=>R.value=e),placeholder:"搜索角色名"},null,8,["value"])])),_:1}),u(x,null,{default:t((()=>[u(T,{type:"primary",onClick:C},{default:t((()=>a[6]||(a[6]=[c("搜索")]))),_:1,__:[6]})])),_:1}),u(x,null,{default:t((()=>[u(T,{type:"primary",onClick:a[1]||(a[1]=e=>U.value=!0)},{default:t((()=>a[7]||(a[7]=[c("新建角色")]))),_:1,__:[7]})])),_:1})])),_:1}),u(D,{dataSource:k.value,rowKey:e=>e._id,style:{"margin-top":"16px"}},{default:t((()=>[u(O,{title:"角色名",dataIndex:"name"}),u(O,{title:"描述",dataIndex:"description"}),u(O,{title:"上传方式",dataIndex:"storageType"}),u(O,{title:"默认角色",customRender:(e,a)=>a.isDefault?"是":"否"},null,8,["customRender"]),u(O,{title:"操作",customRender:(a,l)=>e.actionRender(l)},null,8,["customRender"])])),_:1},8,["dataSource","rowKey"])])),_:1}),u(V,{visible:U.value,"onUpdate:visible":a[5]||(a[5]=e=>U.value=e),title:"新建角色",onOk:I},{default:t((()=>[u(j,{model:q.value},{default:t((()=>[u(x,{label:"角色名",required:""},{default:t((()=>[u(w,{value:q.value.name,"onUpdate:value":a[2]||(a[2]=e=>q.value.name=e)},null,8,["value"])])),_:1}),u(x,{label:"描述"},{default:t((()=>[u(w,{value:q.value.description,"onUpdate:value":a[3]||(a[3]=e=>q.value.description=e)},null,8,["value"])])),_:1}),u(x,{label:"上传方式",required:""},{default:t((()=>[u(P,{value:q.value.storageType,"onUpdate:value":a[4]||(a[4]=e=>q.value.storageType=e)},{default:t((()=>[(o(),l(_,null,y(h,(e=>u(K,{key:e.value,value:e.value},{default:t((()=>[c(S(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])])}}};export{T as default};
